<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="780" viewBox="0 0 1100 780" font-family="'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <marker id="ah" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <path d="M0,1 L9,4 L0,7" fill="none" stroke="#475569" stroke-width="1.4" stroke-linejoin="round"/>
    </marker>
    <marker id="ahBlue" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <path d="M0,1 L9,4 L0,7" fill="none" stroke="#3b82f6" stroke-width="1.4" stroke-linejoin="round"/>
    </marker>
    <filter id="ds" x="-3%" y="-6%" width="106%" height="118%">
      <feDropShadow dx="0" dy="2" stdDeviation="5" flood-color="#94a3b8" flood-opacity="0.16"/>
    </filter>
    <!-- Gradients -->
    <linearGradient id="bgG" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#f8fafc"/><stop offset="100%" stop-color="#e2e8f0"/>
    </linearGradient>
    <linearGradient id="feG" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#dbeafe"/><stop offset="100%" stop-color="#bfdbfe"/>
    </linearGradient>
    <linearGradient id="beG" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#d1fae5"/><stop offset="100%" stop-color="#a7f3d0"/>
    </linearGradient>
    <linearGradient id="agG" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#fef3c7"/><stop offset="100%" stop-color="#fde68a"/>
    </linearGradient>
    <linearGradient id="aiG" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#fce7f3"/><stop offset="100%" stop-color="#fbcfe8"/>
    </linearGradient>
    <linearGradient id="ifG" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ede9fe"/><stop offset="100%" stop-color="#ddd6fe"/>
    </linearGradient>
  </defs>

  <!-- Canvas -->
  <rect width="1100" height="780" rx="18" fill="url(#bgG)"/>

  <!-- Title -->
  <text x="550" y="38" text-anchor="middle" font-size="22" font-weight="700" fill="#0f172a" letter-spacing="-0.4">Technical Architecture</text>
  <text x="550" y="56" text-anchor="middle" font-size="11" fill="#64748b">Powered by Google Gemini  ·  Decoupled Client-Server  ·  Serverless</text>

  <!-- ════════════ TIER 1 — FRONTEND ════════════ -->
  <g filter="url(#ds)">
    <rect x="40" y="74" width="1020" height="110" rx="14" fill="url(#feG)" stroke="#93c5fd" stroke-width="1.2"/>
  </g>
  <text x="60" y="98" font-size="13" font-weight="700" fill="#1e40af">FRONTEND</text>
  <text x="60" y="112" font-size="10" fill="#3b82f6">Next.js 16  ·  Static Export → Firebase Hosting</text>
  <!-- Row 1 pills -->
  <g transform="translate(60,122)">
    <rect width="74" height="26" rx="7" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="37" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#1e3a5f">Next.js 16</text>
  </g>
  <g transform="translate(146,122)">
    <rect width="74" height="26" rx="7" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="37" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#1e3a5f">React 19</text>
  </g>
  <g transform="translate(232,122)">
    <rect width="88" height="26" rx="7" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="44" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#1e3a5f">TypeScript</text>
  </g>
  <g transform="translate(332,122)">
    <rect width="92" height="26" rx="7" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="46" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#1e3a5f">Tailwind CSS</text>
  </g>
  <g transform="translate(436,122)">
    <rect width="106" height="26" rx="7" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="53" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#1e3a5f">shadcn/ui (Radix)</text>
  </g>
  <!-- Row 2 pills — app internals -->
  <g transform="translate(60,154)">
    <rect width="108" height="22" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
    <text x="54" y="15" text-anchor="middle" font-size="10" fill="#1e40af">App Context (state)</text>
  </g>
  <g transform="translate(178,154)">
    <rect width="96" height="22" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
    <text x="48" y="15" text-anchor="middle" font-size="10" fill="#1e40af">REST API Client</text>
  </g>
  <g transform="translate(284,154)">
    <rect width="120" height="22" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
    <text x="60" y="15" text-anchor="middle" font-size="10" fill="#1e40af">8-Step Stepper UI</text>
  </g>
  <g transform="translate(414,154)">
    <rect width="100" height="22" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
    <text x="50" y="15" text-anchor="middle" font-size="10" fill="#1e40af">HITL Chat Panels</text>
  </g>

  <!-- ════════════ Arrow: Frontend → Backend ════════════ -->
  <line x1="550" y1="184" x2="550" y2="214" stroke="#475569" stroke-width="1.6" marker-end="url(#ah)"/>
  <text x="562" y="204" font-size="9" fill="#64748b">REST / SSE</text>

  <!-- ════════════ TIER 2 — BACKEND ════════════ -->
  <g filter="url(#ds)">
    <rect x="40" y="218" width="1020" height="100" rx="14" fill="url(#beG)" stroke="#6ee7b7" stroke-width="1.2"/>
  </g>
  <text x="60" y="242" font-size="13" font-weight="700" fill="#065f46">BACKEND</text>
  <text x="60" y="256" font-size="10" fill="#059669">Python 3.11  ·  FastAPI + Uvicorn  ·  Cloud Run (port 8080)</text>
  <!-- Pills -->
  <g transform="translate(60,266)">
    <rect width="86" height="26" rx="7" fill="#fff" stroke="#6ee7b7" stroke-width="1"/>
    <text x="43" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#064e3b">Python 3.11</text>
  </g>
  <g transform="translate(158,266)">
    <rect width="70" height="26" rx="7" fill="#fff" stroke="#6ee7b7" stroke-width="1"/>
    <text x="35" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#064e3b">FastAPI</text>
  </g>
  <g transform="translate(240,266)">
    <rect width="74" height="26" rx="7" fill="#fff" stroke="#6ee7b7" stroke-width="1"/>
    <text x="37" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#064e3b">Uvicorn</text>
  </g>
  <g transform="translate(326,266)">
    <rect width="88" height="26" rx="7" fill="#fff" stroke="#6ee7b7" stroke-width="1"/>
    <text x="44" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#064e3b">Pydantic v2</text>
  </g>
  <g transform="translate(426,266)">
    <rect width="70" height="26" rx="7" fill="#fff" stroke="#6ee7b7" stroke-width="1"/>
    <text x="35" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#064e3b">aiohttp</text>
  </g>
  <g transform="translate(508,266)">
    <rect width="82" height="26" rx="7" fill="#fff" stroke="#6ee7b7" stroke-width="1"/>
    <text x="41" y="17" text-anchor="middle" font-size="11" font-weight="600" fill="#064e3b">Pillow</text>
  </g>
  <!-- Orchestrator + Sessions -->
  <g transform="translate(616,266)">
    <rect width="148" height="26" rx="7" fill="#ecfdf5" stroke="#34d399" stroke-width="0.8"/>
    <text x="74" y="17" text-anchor="middle" font-size="10" font-weight="600" fill="#065f46">Pipeline Orchestrator</text>
  </g>
  <g transform="translate(776,266)">
    <rect width="138" height="26" rx="7" fill="#ecfdf5" stroke="#34d399" stroke-width="0.8"/>
    <text x="69" y="17" text-anchor="middle" font-size="10" font-weight="600" fill="#065f46">In-Memory Sessions</text>
  </g>

  <!-- ════════════ Arrow: Backend → Agent Pipeline ════════════ -->
  <line x1="550" y1="318" x2="550" y2="348" stroke="#475569" stroke-width="1.6" marker-end="url(#ah)"/>
  <text x="562" y="338" font-size="9" fill="#64748b">orchestrates</text>

  <!-- ════════════ TIER 3 — MULTI-AGENT PIPELINE ════════════ -->
  <g filter="url(#ds)">
    <rect x="40" y="352" width="1020" height="90" rx="14" fill="url(#agG)" stroke="#fbbf24" stroke-width="1.2"/>
  </g>
  <text x="60" y="376" font-size="13" font-weight="700" fill="#78350f">MULTI-AGENT PIPELINE</text>
  <text x="60" y="390" font-size="10" fill="#92400e">Sequential agent chain with HITL chat at every stage</text>
  <!-- Agent pills with arrows between them -->
  <g transform="translate(60,400)">
    <rect width="96" height="28" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
    <text x="48" y="18" text-anchor="middle" font-size="10" font-weight="700" fill="#78350f">1 Research</text>
  </g>
  <line x1="160" y1="414" x2="172" y2="414" stroke="#78350f" stroke-width="1.2" marker-end="url(#ah)"/>
  <g transform="translate(178,400)">
    <rect width="88" height="28" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
    <text x="44" y="18" text-anchor="middle" font-size="10" font-weight="700" fill="#78350f">2 Director</text>
  </g>
  <line x1="270" y1="414" x2="282" y2="414" stroke="#78350f" stroke-width="1.2" marker-end="url(#ah)"/>
  <g transform="translate(288,400)">
    <rect width="92" height="28" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
    <text x="46" y="18" text-anchor="middle" font-size="10" font-weight="700" fill="#78350f">3 Linguistic</text>
  </g>
  <line x1="384" y1="414" x2="396" y2="414" stroke="#78350f" stroke-width="1.2" marker-end="url(#ah)"/>
  <g transform="translate(402,400)">
    <rect width="108" height="28" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
    <text x="54" y="18" text-anchor="middle" font-size="10" font-weight="700" fill="#78350f">4 Visual / Audio</text>
  </g>
  <line x1="514" y1="414" x2="526" y2="414" stroke="#78350f" stroke-width="1.2" marker-end="url(#ah)"/>
  <g transform="translate(532,400)">
    <rect width="96" height="28" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
    <text x="48" y="18" text-anchor="middle" font-size="10" font-weight="700" fill="#78350f">5 Sensitivity</text>
  </g>
  <line x1="632" y1="414" x2="644" y2="414" stroke="#78350f" stroke-width="1.2" marker-end="url(#ah)"/>
  <g transform="translate(650,400)">
    <rect width="82" height="28" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
    <text x="41" y="18" text-anchor="middle" font-size="10" font-weight="700" fill="#78350f">6 Social</text>
  </g>

  <!-- ════════════ Arrow: Pipeline → AI Services ════════════ -->
  <line x1="550" y1="442" x2="550" y2="476" stroke="#475569" stroke-width="1.6" marker-end="url(#ah)"/>
  <text x="562" y="464" font-size="9" fill="#64748b">google-genai SDK</text>

  <!-- ════════════ TIER 4 — EXTERNAL AI SERVICES ════════════ -->
  <g filter="url(#ds)">
    <rect x="40" y="480" width="1020" height="100" rx="14" fill="url(#aiG)" stroke="#f9a8d4" stroke-width="1.2"/>
  </g>
  <text x="60" y="504" font-size="13" font-weight="700" fill="#9d174d">GOOGLE AI SERVICES</text>
  <text x="60" y="518" font-size="10" fill="#be185d">Accessed via google-genai SDK  ·  API key auth</text>
  <!-- Model pills -->
  <g transform="translate(60,528)">
    <rect width="116" height="28" rx="8" fill="#fff" stroke="#f9a8d4" stroke-width="1"/>
    <text x="58" y="12" text-anchor="middle" font-size="10" font-weight="600" fill="#831843">Gemini 2.0 Flash</text>
    <text x="58" y="23" text-anchor="middle" font-size="8" fill="#9d174d">Research · Director</text>
  </g>
  <g transform="translate(190,528)">
    <rect width="130" height="28" rx="8" fill="#fff" stroke="#f9a8d4" stroke-width="1"/>
    <text x="65" y="12" text-anchor="middle" font-size="10" font-weight="600" fill="#831843">Gemini 3 Flash Prev.</text>
    <text x="65" y="23" text-anchor="middle" font-size="8" fill="#9d174d">Visual/Audio text gen</text>
  </g>
  <g transform="translate(334,528)">
    <rect width="136" height="28" rx="8" fill="#fff" stroke="#f9a8d4" stroke-width="1"/>
    <text x="68" y="12" text-anchor="middle" font-size="10" font-weight="600" fill="#831843">Nano Banana 2</text>
    <text x="68" y="23" text-anchor="middle" font-size="8" fill="#9d174d">gemini-2.5-flash-image</text>
  </g>
  <g transform="translate(484,528)">
    <rect width="116" height="28" rx="8" fill="#fff" stroke="#f9a8d4" stroke-width="1"/>
    <text x="58" y="12" text-anchor="middle" font-size="10" font-weight="600" fill="#831843">Veo 3.1 Fast</text>
    <text x="58" y="23" text-anchor="middle" font-size="8" fill="#9d174d">Video generation</text>
  </g>
  <g transform="translate(614,528)">
    <rect width="116" height="28" rx="8" fill="#fff" stroke="#f9a8d4" stroke-width="1"/>
    <text x="58" y="12" text-anchor="middle" font-size="10" font-weight="600" fill="#831843">Deep Research</text>
    <text x="58" y="23" text-anchor="middle" font-size="8" fill="#9d174d">Interactions API</text>
  </g>
  <g transform="translate(744,528)">
    <rect width="108" height="28" rx="8" fill="#fff" stroke="#f9a8d4" stroke-width="1"/>
    <text x="54" y="12" text-anchor="middle" font-size="10" font-weight="600" fill="#831843">Serper API</text>
    <text x="54" y="23" text-anchor="middle" font-size="8" fill="#9d174d">Google Search</text>
  </g>

  <!-- ════════════ TIER 5 — INFRASTRUCTURE ════════════ -->
  <g filter="url(#ds)">
    <rect x="140" y="620" width="200" height="72" rx="14" fill="url(#ifG)" stroke="#a78bfa" stroke-width="1.2"/>
  </g>
  <text x="160" y="646" font-size="13" font-weight="700" fill="#4c1d95">CONTAINERS</text>
  <g transform="translate(160,654)">
    <rect width="150" height="24" rx="7" fill="#fff" stroke="#a78bfa" stroke-width="1"/>
    <text x="75" y="16" text-anchor="middle" font-size="10" font-weight="600" fill="#4c1d95">Docker (python:3.11-slim)</text>
  </g>

  <!-- Arrow: Containers → Cloud Run -->
  <line x1="340" y1="656" x2="440" y2="656" stroke="#475569" stroke-width="1.6" marker-end="url(#ah)"/>
  <text x="367" y="648" font-size="9" fill="#64748b">deploy</text>

  <g filter="url(#ds)">
    <rect x="450" y="620" width="220" height="72" rx="14" fill="url(#ifG)" stroke="#a78bfa" stroke-width="1.2"/>
  </g>
  <text x="470" y="646" font-size="13" font-weight="700" fill="#4c1d95">CLOUD</text>
  <g transform="translate(470,654)">
    <rect width="118" height="24" rx="7" fill="#fff" stroke="#a78bfa" stroke-width="1"/>
    <text x="59" y="16" text-anchor="middle" font-size="10" font-weight="600" fill="#4c1d95">Google Cloud Run</text>
  </g>

  <g filter="url(#ds)">
    <rect x="710" y="620" width="200" height="72" rx="14" fill="url(#ifG)" stroke="#a78bfa" stroke-width="1.2"/>
  </g>
  <text x="730" y="646" font-size="13" font-weight="700" fill="#4c1d95">HOSTING</text>
  <g transform="translate(730,654)">
    <rect width="142" height="24" rx="7" fill="#fff" stroke="#a78bfa" stroke-width="1"/>
    <text x="71" y="16" text-anchor="middle" font-size="10" font-weight="600" fill="#4c1d95">Firebase Hosting (CDN)</text>
  </g>

  <!-- Dashed arrow: Firebase → Frontend (hosts static) -->
  <path d="M 910 620 L 910 135 Q 910 120 900 120 L 560 120" stroke="#7c3aed" stroke-width="1.2" stroke-dasharray="6,4" fill="none" marker-end="url(#ah)"/>
  <text x="916" y="370" font-size="9" fill="#7c3aed" transform="rotate(-90,916,370)">hosts static export (out/)</text>

  <!-- Dashed arrow: Cloud Run → Backend -->
  <path d="M 560 620 L 560 320" stroke="#7c3aed" stroke-width="1.2" stroke-dasharray="6,4" fill="none" marker-end="url(#ah)"/>
  <text x="566" y="480" font-size="9" fill="#7c3aed" transform="rotate(-90,566,480)">runs backend container</text>

  <!-- ════════════ Flow caption at bottom ════════════ -->
  <text x="550" y="726" text-anchor="middle" font-size="12" fill="#475569">
    Frontend (Next.js static) ↔ Backend (FastAPI + 6 Gemini agents) → Docker → Cloud Run  |  Static assets → Firebase CDN
  </text>
  <text x="550" y="746" text-anchor="middle" font-size="10" fill="#94a3b8">
    Pipeline: Research → Director → Linguistic → Visual/Audio → Sensitivity → Social  ·  HITL chat at every stage
  </text>

</svg>
